<!DOCTYPE html>
{% load static %}
{% load tooltip_tags %}
<html>
<head>
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"/>
    <title>{% block title %}Peptide Database{% endblock %}</title>

</head>
<body>
<header>
    <!-- Aquí tu menú o logo -->
</header>

<main>
    {% block content %}
    <!-- El contenido específico de cada página va aquí -->
    {% endblock %}
</main>

<footer>
    <!-- Pie de página -->
</footer>
</body>
<script>
    function toggleTaxonomy(button) {
      const panel = button.nextElementSibling;
      const isVisible = panel.style.display === "block";
      panel.style.display = isVisible ? "none" : "block";
      button.textContent = isVisible ? "Show Taxonomy Details" : "Hide Taxonomy Details";
    }
<script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js">
</script>
<script>
    const tooltips = document.querySelectorAll('[data-bs-toggle="tooltip"]');
    tooltips.forEach(el => new bootstrap.Tooltip(el));

</script>

<script>
    document.addEventListener("DOMContentLoaded", () => {
      // Para función (texto simple)
      document.querySelectorAll(".text-preview.function").forEach(span => {
        const full = span.textContent.trim();
        if (full.length > 50) {
          span.dataset.full = full;
          span.dataset.truncated = full.slice(0, 50) + "…";
          span.textContent = span.dataset.truncated;
          span.dataset.expanded = "false";
        }
      });

      // Para referencias (texto plano con saltos de línea)
      document.querySelectorAll(".text-preview.references").forEach(span => {
        const full = span.textContent.trim();
        if (full.length > 50) {
          span.dataset.full = full;
          span.dataset.truncated = full.slice(0, 50) + "…";
          span.textContent = span.dataset.truncated;
          span.dataset.expanded = "false";
        }
      });
    });

    function toggleText(id) {
      const preview = document.getElementById(`function-preview-${id}`);
      const link = document.getElementById(`toggle-link-${id}`);
      const isOpen = preview.dataset.expanded === "true";

      if (isOpen) {
        preview.textContent = preview.dataset.truncated;
        link.textContent = "Show more";
        preview.dataset.expanded = "false";
      } else {
        preview.textContent = preview.dataset.full;
        link.textContent = "Show less";
        preview.dataset.expanded = "true";
      }
    }

    function toggleRef(id) {
      const preview = document.getElementById(`reference-preview-${id}`);
      const link = document.getElementById(`toggle-ref-${id}`);
      const isOpen = preview.dataset.expanded === "true";

      if (isOpen) {
        preview.textContent = preview.dataset.truncated;
        link.textContent = "Show more";
        preview.dataset.expanded = "false";
      } else {
        // Aquí convertimos saltos de línea a <br> para mostrar bien referencias
        preview.innerHTML = preview.dataset.full.replace(/\n/g, "<br>");
        link.textContent = "Show less";
        preview.dataset.expanded = "true";
      }
    }
</script>

</html>
